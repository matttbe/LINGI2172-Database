TYPE U#       POSSREP {USERID INTEGER};
TYPE P#       POSSREP {PARKINGID INTEGER};
TYPE PASS#    POSSREP {PASSID INTEGER};
TYPE DATE     POSSREP {DATE CHAR};
TYPE DATETIME POSSREP {DATETIME CHAR};
TYPE TIME     POSSREP {TIME CHAR};
TYPE USERNAME POSSREP {USERNAME CHAR};
TYPE PASSWORD POSSREP {PASSWORD CHAR};
TYPE PNAME    POSSREP {PNAME CHAR};
TYPE CNAME    POSSREP {CNAME CHAR};
TYPE FUEL     POSSREP {FUEL CHAR};
TYPE CITY     POSSREP {CITY CHAR};
TYPE STREET   POSSREP {STREET CHAR};
TYPE COUNTRY  POSSREP {COUNTRY CHAR};
TYPE HSTART   POSSREP {HSTART CHAR};
TYPE HEND     POSSREP {HEND CHAR};

VAR USER          BASE RELATION {USERID U#, USERTYPE INTEGER, USERNAME USERNAME, PASSWORD PASSWORD}  KEY {USERID};
VAR PARKING       BASE RELATION {PARKINGID P#, NAME PNAME, DEFIBRILLATOR BOOLEAN, FREEPLACES INTEGER, TOTALPLACES INTEGER, HEIGHT INTEGER}  KEY {PARKINGID};
VAR PASS          BASE RELATION {PASSID PASS#, DATESTART DATE, DATEEND DATE, USERID U#}  KEY {PASSID};
VAR CAR           BASE RELATION {NAME CNAME, HEIGHT INTEGER, FUEL FUEL, USERID U#, LATITUDE RATIONAL, LONGITUDE RATIONAL}  KEY {};
VAR HISTORY       BASE RELATION {USERID U#, DATETIMESTART DATETIME, DATETIMEEND DATETIME, PARKINGID P#}  KEY {USERID, DATETIMESTART, DATETIMEEND};
VAR PASSPARKING   BASE RELATION {PARKINGID P#, PASSID PASS#}  KEY {};
VAR LOCATION      BASE RELATION {PARKINGID P#, LATITUDE RATIONAL, LONGITUDE RATIONAL}  KEY {LATITUDE, LONGITUDE};
VAR ADDRESS       BASE RELATION {PARKINGID P#, STREET STREET, NUMBER INTEGER, CITY CITY, ZIP INTEGER, COUNTRY COUNTRY}  KEY {STREET, NUMBER, CITY, ZIP, COUNTRY};
VAR OPENINGHOURS  BASE RELATION {DAYSTART INTEGER, DAYEND INTEGER, HOURSTART HSTART, HOUREND HEND, PARKINGID P#}  KEY {};
VAR HOURLYRATE    BASE RELATION {TIMESTART TIME, TIMEEND TIME, COST RATIONAL, PARKINGID P#}  KEY {TIMESTART, TIMEEND, COST, PARKINGID};
VAR FORBIDDENFUEL BASE RELATION {PARKINGID P#, FUEL FUEL}  KEY {PARKINGID, FUEL};

CONSTRAINT C1  PASS {USERID}    <= USER {USERID};
CONSTRAINT C2  CAR {USERID}     <= USER {USERID};
CONSTRAINT C3  HISTORY {USERID} <= USER {USERID};
CONSTRAINT C6  PASSPARKING {PASSID} <= PASS {PASSID};
CONSTRAINT C4  HISTORY {PARKINGID}       <= PARKING {PARKINGID};
CONSTRAINT C5  PASSPARKING {PARKINGID}   <= PARKING {PARKINGID};
CONSTRAINT C7  LOCATION {PARKINGID}      <= PARKING {PARKINGID};
CONSTRAINT C8  ADDRESS {PARKINGID}       <= PARKING {PARKINGID};
CONSTRAINT C9  OPENINGHOURS {PARKINGID}  <= PARKING {PARKINGID};
CONSTRAINT C10 HOURLYRATE {PARKINGID}    <= PARKING {PARKINGID};
CONSTRAINT C11 FORBIDDENFUEL {PARKINGID} <= PARKING {PARKINGID};
CONSTRAINT C12 IS_EMPTY (OPENINGHOURS{DAYSTART} WHERE (DAYSTART < 0 OR DAYSTART > 6));
CONSTRAINT C13 IS_EMPTY (OPENINGHOURS{DAYEND} WHERE (DAYEND < 0 OR DAYEND > 6));
CONSTRAINT C14 IS_EMPTY (PARKING WHERE FREEPLACES > TOTALPLACES);
CONSTRAINT C15 IS_EMPTY (PARKING{HEIGHT} WHERE HEIGHT < 0);
CONSTRAINT C16 IS_EMPTY (CAR{HEIGHT} WHERE HEIGHT < 0);

USER := RELATION {
  TUPLE {USERID U#(1), USERTYPE INTEGER(0), USERNAME USERNAME("user"), PASSWORD PASSWORD("abcd")},
  TUPLE {USERID U#(2), USERTYPE INTEGER(2), USERNAME USERNAME("user2"), PASSWORD PASSWORD("abcd")}
  };
PARKING := RELATION {
  TUPLE {PARKINGID P#(1), NAME PNAME("Sainte Barb"), DEFIBRILLATOR BOOLEAN(TRUE), FREEPLACES INTEGER(10), TOTALPLACES INTEGER(110), HEIGHT INTEGER(198)}
  };
CAR := RELATION {
  TUPLE {NAME CNAME("Toto bleue"), HEIGHT INTEGER(154), FUEL FUEL("Diesel"), USERID U#(1), LATITUDE RATIONAL(50.6836196), LONGITUDE RATIONAL(4.3712134)}
  };
HISTORY := RELATION {
  TUPLE {USERID U#(1), DATETIMESTART DATETIME("2007-01-01 10:00:00"), DATETIMEEND DATETIME("2007-01-01 11:00:00"), PARKINGID P#(1)}
  };
LOCATION := RELATION {
  TUPLE {PARKINGID P#(1), LATITUDE RATIONAL(50.6836196), LONGITUDE RATIONAL(4.3712134)}
  };
ADDRESS := RELATION {
  TUPLE {PARKINGID P#(1), STREET STREET("rue aux fleurs"), NUMBER INTEGER(1), CITY CITY("LLN"), ZIP INTEGER(1348), COUNTRY COUNTRY("Belgium")}
  };
OPENINGHOURS := RELATION {
  TUPLE {DAYSTART INTEGER(0), DAYEND INTEGER(6), HOURSTART HSTART("00:00:00"), HOUREND HEND("23:59:59"), PARKINGID P#(1)}
  };
HOURLYRATE := RELATION {
  TUPLE {TIMESTART TIME("00:00:00"), TIMEEND TIME("02:00:00"), COST RATIONAL(2.35), PARKINGID P#(1)}
  };
FORBIDDENFUEL := RELATION {
  TUPLE {PARKINGID P#(1), FUEL FUEL("Diesel")}
  };
